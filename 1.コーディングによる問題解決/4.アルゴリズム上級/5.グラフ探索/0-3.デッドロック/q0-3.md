## 注意点
- 依存性ゼロになるまで複数回制御が必要なので `seen` によるスキップはバグとなった
- 依存性ゼロになってから処理済みか否かを判定するので `used_as_root` によるスキップは必要だった

